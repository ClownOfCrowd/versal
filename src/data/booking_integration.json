{
  "booking_integration": {
    "api": {
      "endpoint": "https://api.versal-restaurant.ru/v1/bookings",
      "methods": {
        "check_availability": {
          "method": "GET",
          "path": "/availability",
          "params": ["date", "time", "guests"],
          "cache_duration": "5m"
        },
        "create_booking": {
          "method": "POST",
          "path": "/create",
          "required_fields": [
            "name",
            "phone",
            "date",
            "time",
            "guests"
          ]
        },
        "update_booking": {
          "method": "PUT",
          "path": "/update/{booking_id}",
          "required_fields": ["booking_id"]
        },
        "cancel_booking": {
          "method": "DELETE",
          "path": "/cancel/{booking_id}",
          "required_fields": ["booking_id"]
        }
      },
      "headers": {
        "Content-Type": "application/json",
        "Api-Version": "1.0",
        "Api-Key": "{{API_KEY}}"
      }
    },
    "validation": {
      "rules": {
        "name": {
          "min_length": 2,
          "max_length": 100,
          "pattern": "^[–ê-–Ø–∞-—è–Å—ë\\s-]+$",
          "error_message": "–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∏–º—è"
        },
        "phone": {
          "pattern": "^\\+7\\s?\\(\\d{3}\\)\\s?\\d{3}-\\d{2}-\\d{2}$",
          "error_message": "–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞"
        },
        "date": {
          "min": "today",
          "max": "+30d",
          "excluded_dates": ["2024-01-01", "2024-05-09"],
          "error_message": "–í—ã–±–µ—Ä–∏—Ç–µ –¥–∞—Ç—É –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö 30 –¥–Ω–µ–π"
        },
        "time": {
          "intervals": ["12:00-23:00"],
          "step": "30m",
          "last_booking": "22:00",
          "error_message": "–í—ã–±–µ—Ä–∏—Ç–µ –≤—Ä–µ–º—è –≤ —Ä–∞–±–æ—á–∏–µ —á–∞—Å—ã —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞"
        },
        "guests": {
          "min": 1,
          "max": 20,
          "special_conditions": {
            "more_than_8": {
              "requires_deposit": true,
              "deposit_amount": "5000"
            }
          },
          "error_message": "–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≥–æ—Å—Ç–µ–π –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ—Ç 1 –¥–æ 20"
        }
      }
    },
    "notifications": {
      "booking_created": {
        "client": {
          "sms": {
            "template": "–í–∞—à —Å—Ç–æ–ª–∏–∫ –∑–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω –Ω–∞ {date} {time}. –ñ–¥–µ–º –≤–∞—Å –≤ —Ä–µ—Å—Ç–æ—Ä–∞–Ω–µ Versal! –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ: {booking_id}",
            "sender": "VERSAL"
          },
          "email": {
            "template": "booking_confirmation",
            "subject": "–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è - –†–µ—Å—Ç–æ—Ä–∞–Ω Versal",
            "from": "reservations@versal-restaurant.ru"
          }
        },
        "restaurant": {
          "email": {
            "to": ["host@versal-restaurant.ru", "manager@versal-restaurant.ru"],
            "template": "new_booking_internal",
            "subject": "–ù–æ–≤–æ–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ: {date} {time}, {guests} –≥–æ—Å—Ç–µ–π"
          },
          "telegram": {
            "chat_id": "versal_bookings",
            "template": "üÜï –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ\nüìÖ {date}\n‚è∞ {time}\nüë• {guests} –≥–æ—Å—Ç–µ–π\nüìû {phone}"
          }
        }
      },
      "booking_reminder": {
        "timing": {
          "first": "24h_before",
          "second": "2h_before"
        },
        "channels": {
          "sms": {
            "template": "–ù–∞–ø–æ–º–∏–Ω–∞–µ–º –æ –≤–∞—à–µ–º –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏ –≤ —Ä–µ—Å—Ç–æ—Ä–∞–Ω–µ Versal —Å–µ–≥–æ–¥–Ω—è –≤ {time}. –ñ–¥–µ–º –≤–∞—Å!",
            "sender": "VERSAL"
          },
          "email": {
            "template": "booking_reminder",
            "subject": "–ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –æ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏ - –†–µ—Å—Ç–æ—Ä–∞–Ω Versal"
          }
        }
      },
      "special_requests": {
        "triggers": [
          {
            "condition": "guests > 8",
            "notification": {
              "to": ["chef@versal-restaurant.ru"],
              "template": "large_group_booking",
              "priority": "high"
            }
          },
          {
            "condition": "has_special_dietary",
            "notification": {
              "to": ["chef@versal-restaurant.ru"],
              "template": "dietary_requirements",
              "priority": "high"
            }
          }
        ]
      }
    },
    "table_management": {
      "zones": [
        {
          "id": "main_hall",
          "name": "–û—Å–Ω–æ–≤–Ω–æ–π –∑–∞–ª",
          "capacity": {
            "total": 60,
            "table_configs": [
              {
                "size": 2,
                "count": 8
              },
              {
                "size": 4,
                "count": 6
              },
              {
                "size": 6,
                "count": 4
              }
            ]
          }
        },
        {
          "id": "veranda",
          "name": "–í–µ—Ä–∞–Ω–¥–∞",
          "seasonal": true,
          "season": {
            "start": "15-05",
            "end": "15-09"
          },
          "capacity": {
            "total": 40,
            "table_configs": [
              {
                "size": 2,
                "count": 6
              },
              {
                "size": 4,
                "count": 5
              }
            ]
          }
        },
        {
          "id": "private_room",
          "name": "–ü—Ä–∏–≤–∞—Ç–Ω–∞—è –∫–æ–º–Ω–∞—Ç–∞",
          "capacity": {
            "min": 8,
            "max": 20,
            "requires_deposit": true
          }
        }
      ],
      "special_conditions": {
        "holidays": {
          "deposit_required": true,
          "dates": [
            "2024-02-14",
            "2024-03-08",
            "2024-12-31"
          ]
        },
        "large_groups": {
          "threshold": 8,
          "requirements": [
            "deposit",
            "menu_pre_order",
            "manager_approval"
          ]
        }
      }
    },
    "analytics": {
      "tracking": {
        "events": [
          "form_view",
          "form_start",
          "form_complete",
          "form_abandon",
          "booking_success",
          "booking_error"
        ],
        "properties": {
          "user_type": ["new", "returning"],
          "device_type": ["desktop", "tablet", "mobile"],
          "traffic_source": ["direct", "organic", "referral", "social"]
        }
      },
      "reporting": {
        "daily": {
          "metrics": [
            "total_bookings",
            "conversion_rate",
            "average_party_size",
            "popular_times"
          ],
          "delivery": ["email", "dashboard"]
        },
        "monthly": {
          "metrics": [
            "booking_trends",
            "cancellation_rate",
            "revenue_impact",
            "customer_satisfaction"
          ],
          "delivery": ["email", "dashboard", "pdf"]
        }
      }
    }
  },
  "metadata": {
    "version": "1.0",
    "last_updated": "2024-01-30",
    "responsible": {
      "backend_developer": "–ò–≥–æ—Ä—å –°–º–∏—Ä–Ω–æ–≤",
      "system_architect": "–î–º–∏—Ç—Ä–∏–π –ù–∏–∫–æ–ª–∞–µ–≤",
      "contact": "development@versal-restaurant.ru"
    }
  }
} 